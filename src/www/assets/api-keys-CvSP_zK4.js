import{S as K,q as P,t as x,v as E,w as h,x as A,r as m,y as D,z as j,c,j as e,K as R,f as o}from"./index-DboPALQx.js";import{u as L}from"./useQuery-ThjwS2Ts.js";import{P as V}from"./plus-DyrJt5J6.js";import{T as z}from"./trash-2-Ab-lDYfF.js";import{E as M}from"./eye-DeUi-Z1n.js";import{f}from"./format-CSQe5d3I.js";var I=class extends K{#s;#i=void 0;#e;#a;constructor(a,i){super(),this.#s=a,this.setOptions(i),this.bindMethods(),this.#t()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){const i=this.options;this.options=this.#s.defaultMutationOptions(a),P(this.options,i)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#e,observer:this}),i?.mutationKey&&this.options.mutationKey&&x(i.mutationKey)!==x(this.options.mutationKey)?this.reset():this.#e?.state.status==="pending"&&this.#e.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#e?.removeObserver(this)}onMutationUpdate(a){this.#t(),this.#r(a)}getCurrentResult(){return this.#i}reset(){this.#e?.removeObserver(this),this.#e=void 0,this.#t(),this.#r()}mutate(a,i){return this.#a=i,this.#e?.removeObserver(this),this.#e=this.#s.getMutationCache().build(this.#s,this.options),this.#e.addObserver(this),this.#e.execute(a)}#t(){const a=this.#e?.state??E();this.#i={...a,isPending:a.status==="pending",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset}}#r(a){h.batch(()=>{if(this.#a&&this.hasListeners()){const i=this.#i.variables,n=this.#i.context,t={client:this.#s,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#a.onSuccess?.(a.data,i,n,t),this.#a.onSettled?.(a.data,null,i,n,t)):a?.type==="error"&&(this.#a.onError?.(a.error,i,n,t),this.#a.onSettled?.(void 0,a.error,i,n,t))}this.listeners.forEach(i=>{i(this.#i)})})}};function b(a,i){const n=A(),[t]=m.useState(()=>new I(n,a));m.useEffect(()=>{t.setOptions(a)},[t,a]);const r=m.useSyncExternalStore(m.useCallback(l=>t.subscribe(h.batchCalls(l)),[t]),()=>t.getCurrentResult(),()=>t.getCurrentResult()),d=m.useCallback((l,p)=>{t.mutate(l,p).catch(D)},[t]);if(r.error&&j(t.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:d,mutateAsync:r.mutate}}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],y=c("calendar",q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],F=c("copy",_);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Q=c("eye-off",$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],U=c("globe",T),H=()=>{const[a,i]=m.useState(!1),[n,t]=m.useState(new Set),[r,d]=m.useState({name:"",description:"",expiresAt:""}),l=A(),{data:p,isLoading:k}=L({queryKey:["apiKeys"],queryFn:async()=>(await o.get("/admin/api-keys")).data}),g=p?.data||[],N=b({mutationFn:async s=>(await o.post("/admin/api-keys",s)).data,onSuccess:()=>{l.invalidateQueries({queryKey:["apiKeys"]}),i(!1),d({name:"",description:"",expiresAt:""})}}),O=b({mutationFn:async s=>{await o.delete(`/admin/api-keys/${s}`)},onSuccess:()=>{l.invalidateQueries({queryKey:["apiKeys"]})}}),v=b({mutationFn:async({id:s,isActive:u})=>{await o.put(`/admin/api-keys/${s}`,{isActive:u})},onSuccess:()=>{l.invalidateQueries({queryKey:["apiKeys"]})}}),w=s=>{s.preventDefault();const u={...r,expiresAt:r.expiresAt?new Date(r.expiresAt).toISOString():void 0};N.mutate(u)},C=s=>{navigator.clipboard.writeText(s)},S=s=>{const u=new Set(n);u.has(s)?u.delete(s):u.add(s),t(u)};return k?e.jsxDEV("div",{className:"flex items-center justify-center h-64",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:113,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:112,columnNumber:7},void 0):e.jsxDEV("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-8",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900",children:"API Keys"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:122,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 mt-2",children:"Manage API keys for accessing your store data programmatically"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:123,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:121,columnNumber:9},void 0),e.jsxDEV("button",{onClick:()=>i(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsxDEV(V,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:131,columnNumber:11},void 0),"Create API Key"]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:127,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:120,columnNumber:7},void 0),a&&e.jsxDEV("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxDEV("h2",{className:"text-xl font-semibold mb-4",children:"Create New API Key"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:139,columnNumber:11},void 0),e.jsxDEV("form",{onSubmit:w,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:142,columnNumber:15},void 0),e.jsxDEV("input",{type:"text",required:!0,value:r.name,onChange:s=>d({...r,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Frontend Store API Key"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:145,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:141,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:156,columnNumber:15},void 0),e.jsxDEV("textarea",{value:r.description,onChange:s=>d({...r,description:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe what this API key will be used for...",rows:3},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:159,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:155,columnNumber:13},void 0),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expires At (Optional)"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:169,columnNumber:15},void 0),e.jsxDEV("input",{type:"datetime-local",value:r.expiresAt,onChange:s=>d({...r,expiresAt:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:172,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:168,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",disabled:N.isPending,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50",children:N.isPending?"Creating...":"Create API Key"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:181,columnNumber:15},void 0),e.jsxDEV("button",{type:"button",onClick:()=>i(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400",children:"Cancel"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:188,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:180,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:140,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:138,columnNumber:9},void 0),e.jsxDEV("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsxDEV("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxDEV("h2",{className:"text-lg font-semibold",children:"Your API Keys"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:203,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:202,columnNumber:9},void 0),g.length===0?e.jsxDEV("div",{className:"p-8 text-center",children:[e.jsxDEV(R,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:208,columnNumber:13},void 0),e.jsxDEV("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No API Keys"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:209,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"Create your first API key to start accessing your store data programmatically."},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:210,columnNumber:13},void 0),e.jsxDEV("button",{onClick:()=>i(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create API Key"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:213,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:207,columnNumber:11},void 0):e.jsxDEV("div",{className:"divide-y divide-gray-200",children:g.map(s=>e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full ${s.isActive?"bg-green-500":"bg-red-500"}`},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:226,columnNumber:21},void 0),e.jsxDEV("h3",{className:"text-lg font-medium",children:s.name},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:229,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:225,columnNumber:19},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{onClick:()=>v.mutate({id:s.id,isActive:!s.isActive}),className:`px-3 py-1 rounded-full text-sm ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?"Active":"Inactive"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:232,columnNumber:21},void 0),e.jsxDEV("button",{onClick:()=>O.mutate(s.id),className:"text-red-600 hover:text-red-800 p-1",children:e.jsxDEV(z,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:249,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:245,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:231,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:224,columnNumber:17},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-700",children:"API Key:"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:256,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxDEV("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm font-mono flex-1",children:n.has(s.id)?s.key:"••••••••••••••••••••••••••••••••"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:258,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>S(s.id),className:"text-gray-500 hover:text-gray-700 p-1",children:n.has(s.id)?e.jsxDEV(Q,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:269,columnNumber:27},void 0):e.jsxDEV(M,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:271,columnNumber:27},void 0)},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:264,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>C(s.key),className:"text-gray-500 hover:text-gray-700 p-1",children:e.jsxDEV(F,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:278,columnNumber:25},void 0)},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:274,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:257,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:255,columnNumber:19},void 0),s.description&&e.jsxDEV("div",{children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-700",children:"Description:"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:285,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:s.description},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:286,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:284,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(y,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:292,columnNumber:23},void 0),"Created: ",f(new Date(s.createdAt),"MMM dd, yyyy")]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:291,columnNumber:21},void 0),s.lastUsedAt&&e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(U,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:297,columnNumber:25},void 0),"Last used: ",f(new Date(s.lastUsedAt),"MMM dd, yyyy HH:mm")]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:296,columnNumber:23},void 0),s.expiresAt&&e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(y,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:303,columnNumber:25},void 0),"Expires: ",f(new Date(s.expiresAt),"MMM dd, yyyy")]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:302,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:290,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:254,columnNumber:17},void 0)]},s.id,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:223,columnNumber:15},void 0))},void 0,!1,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:221,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:201,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/waark/PALSORO/zupp.store/packages/admin/src/pages/ApiKeys.tsx",lineNumber:119,columnNumber:5},void 0)},Z=H;export{Z as component};
//# sourceMappingURL=api-keys-CvSP_zK4.js.map
